(()=>{var e={991:(e,t)=>{var n;!function(){"use strict";var o=function(){function e(){}function t(e,t){for(var n=t.length,o=0;o<n;++o)r(e,t[o])}e.prototype=Object.create(null);var n={}.hasOwnProperty,o=/\s+/;function r(e,r){if(r){var s=typeof r;"string"===s?function(e,t){for(var n=t.split(o),r=n.length,s=0;s<r;++s)e[n[s]]=!0}(e,r):Array.isArray(r)?t(e,r):"object"===s?function(e,t){if(t.toString===Object.prototype.toString||t.toString.toString().includes("[native code]"))for(var o in t)n.call(t,o)&&(e[o]=!!t[o]);else e[t.toString()]=!0}(e,r):"number"===s&&function(e,t){e[t]=!0}(e,r)}}return function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var s=new e;t(s,o);var i=[];for(var a in s)s[a]&&i.push(a);return i.join(" ")}}();e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},184:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===s){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element;var t=n(184),o=n.n(t);const r=window.wp.components,s=window.wp.blockEditor,i=window.wp.compose,a=window.wp.hooks,l=window.wp.i18n,m=window.lodash;var d=n(991),c=n.n(d);const u=window.wp.blocks;function p(e,t){if("core/freeform"===e)return!1;const n=function(e){return(0,a.applyFilters)("SnowMonkeyEditor.extension.allowedNameSpaces",["core","snow-monkey-blocks"],e)}(t);return 0<n.filter((t=>0===e.indexOf(t))).length}function b(e,t){if(!e||!Object.keys(e).length)return!1;const n=function(e){return(0,a.applyFilters)("SnowMonkeyEditor.extension.allowedRoles",["administrator","editor","author","contributor"],e)}(t);return 0<e.roles.filter((e=>-1<n.indexOf(e))).length}const g=JSON.parse('{"smeIsHiddenSm":{"type":"boolean","default":false},"smeIsHiddenMd":{"type":"boolean","default":false},"smeIsHiddenLg":{"type":"boolean","default":false}}'),y={resetAll:{},hasValue:e=>0<(0,m.compact)([e.attributes?.smeIsHiddenSm,e.attributes?.smeIsHiddenMd,e.attributes?.smeIsHiddenLg]).length,resetValue:e=>e.setAttributes({smeIsHiddenSm:void 0,smeIsHiddenMd:void 0,smeIsHiddenLg:void 0}),label:(0,l.__)("Display setting (By window size)","snow-monkey-editor"),isShown:e=>{if(!b(snowmonkeyeditor?.currentUser,"hidden-by-size"))return!1;if(!p(e.name,"hidden-by-size"))return!1;const t=(0,u.getBlockType)(e.name);return!!t&&!!(0,u.hasBlockSupport)(t,"customClassName",!0)},Content:t=>{const{attributes:n,setAttributes:o}=t,{smeIsHiddenSm:s,smeIsHiddenMd:i,smeIsHiddenLg:a,className:m}=n;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r.ToggleControl,{label:(0,l.__)("Hide on smartphone size","snow-monkey-editor"),checked:s,onChange:e=>{o({smeIsHiddenSm:e,className:c()(m,{"sme-hidden-sm":e})})}}),(0,e.createElement)(r.ToggleControl,{label:(0,l.__)("Hide on tablet size","snow-monkey-editor"),checked:i,onChange:e=>{o({smeIsHiddenMd:e,className:c()(m,{"sme-hidden-md":e})})}}),(0,e.createElement)(r.ToggleControl,{label:(0,l.__)("Hide on PC size","snow-monkey-editor"),checked:a,onChange:e=>{o({smeIsHiddenLg:e,className:c()(m,{"sme-hidden-lg-up":e})})}}))}},w=window.wp.data,k=JSON.parse('{"smeIsHiddenRoles":{"type":"array","default":[]}}'),f=window.wp.dataControls,h={roles:{}},v={setRoles:e=>({type:"SET_ROLES",roles:e}),*fetchRoles(){const e=yield(0,f.apiFetch)({path:"/snow-monkey-editor/v1/roles"});return v.setRoles(e)}},E={*getRoles(){yield v.fetchRoles()}},_=(0,w.createReduxStore)("snow-monkey-editor/roles",{reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;return"SET_ROLES"===t.type?{...e,roles:t.roles}:e},actions:v,selectors:{getRoles:e=>e.roles},controls:f.controls,resolvers:E});(0,w.register)(_);const S={resetAll:{},hasValue:e=>!e.attributes?.smeIsHiddenRoles||0<e.attributes?.smeIsHiddenRoles.length,resetValue:e=>e.setAttributes({smeIsHiddenRoles:[]}),label:(0,l.__)("Display setting (By roles)","snow-monkey-editor"),isShown:e=>!!b(snowmonkeyeditor?.currentUser,"hidden-by-role")&&(!!p(e.name,"hidden-by-role")&&!!(0,u.getBlockType)(e.name)),Content:t=>{const{attributes:n,setAttributes:o}=t,{smeIsHiddenRoles:s,className:i}=n,a=(0,w.useSelect)((e=>{const t={...e(_).getRoles()};return{"sme-guest":{name:(0,l.__)("user is not logged in","snow-monkey-editor")},...t}}),[]);let d={};return snowmonkeyeditor?.currentUser?.roles?.includes("administrator")?d={...a}:Object.keys(a).forEach(((e,t)=>{const n=snowmonkeyeditor?.currentUser?.roles?.includes(e);n||(d[e]=Object.values(a)[t])})),(0,e.createElement)(e.Fragment,null,Object.keys(d).map((t=>{const n=(0,l.sprintf)(
// translators: %1$s: The role name
(0,l.__)("Hide if %1$s","snow-monkey-editor"),d[t].name),a="object"==typeof s&&s.includes(t);return(0,e.createElement)(r.ToggleControl,{key:`sme-hidden-role-${t}`,label:n,checked:a,onChange:e=>{const n=((e,t)=>{let n=[...s];return!0===t?n.push(e):n=n.filter((t=>e!==t)),(0,m.uniq)(n)})(t,e);o({smeIsHiddenRoles:n,className:c()(i,{[`sme-hidden-by-role--${t}`]:e})})}})})))},Decorator:t=>{const{attributes:n,children:o}=t,{className:r,smeIsHiddenRoles:s=[]}=n;return r&&!snowmonkeyeditor?.currentUser?.roles?.includes("administrator")&&s.some((e=>snowmonkeyeditor?.currentUser?.roles?.includes(e)))?(0,e.createElement)("div",{className:"sme-hidden-by-role"},o):(0,e.createElement)(e.Fragment,null,o)}},A=["sme-animation-bounce-in","sme-animation-bounce-down","sme-animation-fade-in","sme-animation-fade-in-up","sme-animation-fade-in-down"],C=JSON.parse('{"smeAnimation":{"type":"string"},"smeAnimationDelay":{"type":"number","default":0},"smeAnimationDuration":{"type":"number"}}'),D={resetAll:{},hasValue:e=>!!e.attributes?.smeAnimation,resetValue:e=>e.setAttributes({smeAnimation:void 0,smeAnimationDelay:0,smeAnimationDuration:void 0}),label:(0,l.__)("Animation","snow-monkey-editor"),isShown:e=>{if(!b(snowmonkeyeditor?.currentUser,"animation"))return!1;if(!p(e.name,"animation"))return!1;const t=(0,u.getBlockType)(e.name);return!!t&&!!(0,u.hasBlockSupport)(t,"customClassName",!0)},Content:t=>{const{attributes:n,setAttributes:s}=t,{smeAnimation:i,smeAnimationDelay:a,smeAnimationDuration:d,className:c}=n,u=[{label:"",value:void 0},{label:(0,l.__)("bounce-in","snow-monkey-editor"),value:"bounce-in"},{label:(0,l.__)("bounce-down","snow-monkey-editor"),value:"bounce-down"},{label:(0,l.__)("fade-in","snow-monkey-editor"),value:"fade-in"},{label:(0,l.__)("fade-in-up","snow-monkey-editor"),value:"fade-in-up"},{label:(0,l.__)("fade-in-down","snow-monkey-editor"),value:"fade-in-down"}];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r.SelectControl,{label:(0,l.__)("Animation","snow-monkey-editor"),value:i||void 0,options:u,onChange:e=>{s({smeAnimation:e}),e||s({smeAnimationDelay:void 0});const t=A.filter((t=>`sme-animation-${e}`!==t));s({className:(0,m.difference)(o()(c,{[`sme-animation-${e}`]:!!e}).split(" "),t).join(" ")})}}),(0,e.createElement)(r.RangeControl,{label:(0,l.__)("Delay","snow-monkey-editor"),value:a||0,onChange:e=>{s({smeAnimationDelay:e})},allowReset:!0,min:0,max:5,step:.1}),(0,e.createElement)(r.RangeControl,{label:(0,l.__)("Duration","snow-monkey-editor"),value:d||void 0,onChange:e=>{s({smeAnimationDuration:e})},allowReset:!0,min:0,max:5,step:.1}))}},x=JSON.parse('{"smeStartDateTime":{"type":"string"},"smeEndDateTime":{"type":"string"}}'),I=window.wp.date;function R(t){let{currentDate:n,onChange:o,onReset:s}=t;const i=(0,I.__experimentalGetSettings)(),a=/a(?!\\)/i.test(i.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return(0,e.createElement)("div",{className:"sme-date-time-picker"},(0,e.createElement)(r.DateTimePicker,{currentDate:n,onChange:o,is12Hour:a}),(0,e.createElement)("div",{className:"sme-date-time-picker__action"},(0,e.createElement)("div",null,n),(0,e.createElement)(r.Button,{isSmall:!0,onClick:s},(0,l.__)("Clear","snow-monkey-editor"))))}const T=e=>!!b(snowmonkeyeditor?.currentUser,"date-time")&&(!!p(e.name,"date-time")&&!!(0,u.getBlockType)(e.name)),H={resetAll:{},hasValue:e=>!!e.attributes?.smeStartDateTime,resetValue:e=>e.setAttributes({smeStartDateTime:void 0}),label:(0,l.__)("Publish setting","snow-monkey-editor"),isShown:T,Content:t=>{const{attributes:n,setAttributes:o}=t,{smeStartDateTime:r}=n;return(0,e.createElement)(R,{currentDate:r,onChange:e=>o({smeStartDateTime:e}),onReset:()=>o({smeStartDateTime:void 0})})}},N={resetAll:{},hasValue:e=>!!e.attributes?.smeEndDateTime,resetValue:e=>e.setAttributes({smeEndDateTime:void 0}),label:(0,l.__)("Unpublish setting","snow-monkey-editor"),isShown:T,Content:t=>{const{attributes:n,setAttributes:o}=t,{smeEndDateTime:r}=n;return(0,e.createElement)(R,{currentDate:r,onChange:e=>o({smeEndDateTime:e}),onReset:()=>o({smeEndDateTime:void 0})})}},O=JSON.parse('{"smeIsEditingLockRoles":{"type":"array","default":[]}}'),j=e=>0<(0,m.intersection)(e.attributes.smeIsEditingLockRoles,snowmonkeyeditor?.currentUser?.roles).length,B={resetAll:{},hasValue:e=>!e.attributes?.smeIsEditingLockRoles||0<e.attributes?.smeIsEditingLockRoles.length,resetValue:e=>e.setAttributes({smeIsEditingLockRoles:[]}),label:(0,l.__)("Editing lock (By roles)","snow-monkey-editor"),isShown:e=>!!b(snowmonkeyeditor?.currentUser,"editing-lock")&&(!!p(e.name,"editing-lock")&&(!!(0,m.includes)(snowmonkeyeditor?.currentUser?.roles,"administrator")&&!!(0,u.getBlockType)(e.name))),Content:t=>{const{attributes:n,setAttributes:o,clientId:s}=t,{smeIsEditingLockRoles:i}=n,a=(0,w.useSelect)((e=>{const t={...e(_).getRoles()};return delete t.administrator,Object.keys(t).forEach((e=>{!0!==t[e].capabilities.edit_posts&&delete t[e]})),t}),[]),d=document.getElementById(`block-${s}`);if(d)if(j(t)){const e=d.getAttribute("tabindex");e&&(d.setAttribute("data-sme-tabindex",e),d.setAttribute("tabindex",-1))}else{const e=d.getAttribute("tabindex"),t=d.getAttribute("data-sme-tabindex");e&&t&&(d.setAttribute("tabindex",t),d.removeAttribute("data-sme-tabindex"))}return(0,e.createElement)(e.Fragment,null,Object.keys(a).map((t=>{const n=(0,l.sprintf)(
// translators: %1$s: The role name
(0,l.__)("Edit lock if %1$s","snow-monkey-editor"),a[t].name),s="object"==typeof i&&i.includes(t);return(0,e.createElement)(r.ToggleControl,{key:`sme-editing-lock-role-${t}`,label:n,checked:s,onChange:e=>{const n=((e,t)=>{let n=[...i];return!0===t?n.push(e):n=n.filter((t=>e!==t)),(0,m.uniq)(n)})(t,e);o({smeIsEditingLockRoles:n})}})})))},Decorator:t=>j(t)?(0,e.createElement)(r.Disabled,null,t.children):(0,e.createElement)(e.Fragment,null,t.children)},U=(0,e.createElement)("svg",{role:"img",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},(0,e.createElement)("path",{d:"M13.982,16.711c-0.744,1.441 -2.248,2.428 -3.982,2.428c-1.735,0 -3.238,-0.986 -3.983,-2.428c0.909,-1.213 2.355,-2.002 3.983,-2.002c1.629,0 3.074,0.789 3.982,2.002Zm-0.748,-7.657c-0.314,2.56 1.248,2.919 1.248,5.603c0,0.467 -0.072,0.918 -0.205,1.344c-1.037,-1.203 -2.57,-1.967 -4.277,-1.967c-1.708,0 -3.24,0.764 -4.277,1.967c-0.133,-0.426 -0.205,-0.877 -0.205,-1.344c0,-2.684 1.563,-3.043 1.247,-5.603c-0.362,-2.928 -4.315,-2.465 -4.315,-5.334c0,-1.579 1.279,-2.858 2.858,-2.858c1.709,0 2.765,1.558 4.692,1.558c1.926,0 2.982,-1.558 4.691,-1.558c1.578,0 2.857,1.279 2.857,2.858c0.001,2.869 -3.952,2.406 -4.314,5.334Zm-4.677,-4.947l-0.708,0c0,0.498 -0.403,0.9 -0.901,0.9c-0.498,0 -0.901,-0.402 -0.901,-0.9l-0.708,0c0,0.889 0.72,1.609 1.609,1.609c0.889,0 1.609,-0.72 1.609,-1.609Zm0.979,7.141c0,-0.312 -0.253,-0.568 -0.566,-0.568c-0.313,0 -0.567,0.256 -0.567,0.568c0,0.312 0.254,0.566 0.567,0.566c0.313,0 0.566,-0.253 0.566,-0.566Zm2.062,0c0,-0.312 -0.254,-0.568 -0.568,-0.568c-0.312,0 -0.566,0.256 -0.566,0.568c0,0.312 0.254,0.566 0.566,0.566c0.314,0 0.568,-0.253 0.568,-0.566Zm3.062,-7.141l-0.707,0c0,0.498 -0.404,0.9 -0.9,0.9c-0.498,0 -0.902,-0.402 -0.902,-0.9l-0.707,0c0,0.889 0.721,1.609 1.609,1.609c0.886,0.001 1.607,-0.72 1.607,-1.609Z"})),V=[y,S,D,H,N,B],L=(0,i.createHigherOrderComponent)((t=>n=>{const i=V.some((e=>e.isShown(n)));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n),i&&(0,e.createElement)(s.InspectorControls,null,(0,e.createElement)(r.__experimentalToolsPanel,{label:(0,l.__)("Snow Monkey Editor","snow-monkey-editor"),resetAll:()=>{V.forEach((e=>e.resetValue(n)))},className:"color-block-support-panel sme-extension-tools-panel"},(0,e.createElement)("div",{className:"color-block-support-panel__inner-wrapper",style:{gridColumn:"1 / -1"}},V.map(((t,s)=>t.isShown(n)&&(0,e.createElement)(r.__experimentalToolsPanelItem,{key:s,isShownByDefault:!1,hasValue:()=>!!t.hasValue(n),onDeselect:()=>t.resetValue(n),label:t.label,className:o()("block-editor-tools-panel-color-gradient-settings__item",{first:0===s})},(0,e.createElement)(r.Dropdown,{popoverProps:{className:"sme-popover",placement:"left-start",offset:36,shift:!0},className:o()("block-editor-tools-panel-color-gradient-settings__dropdown","sme-extension-panel",{"sme-extension-panel--enabled":t.hasValue(n)}),renderToggle:n=>{let{isOpen:o,onToggle:s}=n;return(0,e.createElement)(r.Button,{onClick:s,"aria-expanded":o,className:"block-editor-panel-color-gradient-settings__dropdown"},t.label,(0,e.createElement)(r.Icon,{icon:U,className:"components-panel__icon",size:20}))},renderContent:()=>(0,e.createElement)(r.__experimentalDropdownContentWrapper,{paddingSize:"none"},(0,e.createElement)("div",{className:"sme-popover__title"},t.label),(0,e.createElement)("fieldset",null,(0,e.createElement)(t.Content,n)))}))))))))}),"addBlockControl");(0,a.addFilter)("blocks.registerBlockType","snow-monkey-editor/attributes",(e=>{var t;return t=e,(e=>b(snowmonkeyeditor?.currentUser,"editing-lock")&&p(e.name,"editing-lock")?(e.attributes={...e.attributes,...O},e):e)(e=(e=>b(snowmonkeyeditor?.currentUser,"date-time")&&p(e.name,"date-time")?(e.attributes={...e.attributes,...x},e):e)(e=(e=>b(snowmonkeyeditor?.currentUser,"animation")&&p(e.name,"animation")?(e.attributes={...e.attributes,...C},e):e)(e=(e=>b(snowmonkeyeditor?.currentUser,"hidden-by-role")&&p(e.name,"hidden-by-role")?(e.attributes={...e.attributes,...k},e):e)(e=b(snowmonkeyeditor?.currentUser,"hidden-by-size")&&p(t.name,"hidden-by-size")?(t.attributes={...t.attributes,...g},t):t))))})),(0,a.addFilter)("editor.BlockEdit","snow-monkey-editor/block-control",L,101),V&&V.forEach(((t,n)=>{(0,a.addFilter)("editor.BlockEdit",`snow-monkey-editor/block-edit-${n}`,(0,i.createHigherOrderComponent)((n=>o=>{const r=t?.Decorator;return r?(0,e.createElement)(r,o,(0,e.createElement)(n,o)):(0,e.createElement)(n,o)})))}))})()})();